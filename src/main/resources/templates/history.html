<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>진격의 거인 사고 변환기 - 결과</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
        crossorigin="anonymous">
  <style>
    @font-face {
      font-family: 'omyu_pretty';
      src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-01@1.0/omyu_pretty.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }

    body {
      font-family: "omyu_pretty", serif;
      background: linear-gradient(135deg, #2c1810 0%, #8b4513 50%, #cd853f 100%);
      min-height: 100vh;
      color: #f5f5dc;
    }

    .container {
      backdrop-filter: blur(10px);
      background: rgba(0, 0, 0, 0.3);
      border-radius: 20px;
      border: 2px solid rgba(139, 69, 19, 0.5);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    }

    .main-title {
      text-align: center;
      font-size: 2.2rem;
      font-weight: bold;
      color: #ffd700;
      text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
      margin-bottom: 2rem;
      background: linear-gradient(90deg, #ffd700, #ffed4e, #ffd700);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .result-card {
      background: linear-gradient(145deg, rgba(139, 69, 19, 0.8), rgba(160, 82, 45, 0.6));
      border: 2px solid #8b4513;
      border-radius: 15px;
      padding: 2rem;
      margin-bottom: 2rem;
      position: relative;
      overflow: hidden;
    }

    .result-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #ffd700, #ffed4e, #ffd700);
    }

    .id-badge {
      display: inline-block;
      background: rgba(255, 215, 0, 0.2);
      border: 1px solid #ffd700;
      border-radius: 20px;
      padding: 0.3rem 1rem;
      font-size: 0.9rem;
      color: #ffd700;
      font-weight: bold;
      margin-bottom: 1.5rem;
    }

    .section-title {
      color: #ffd700;
      font-weight: bold;
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .content-text {
      color: #f5f5dc;
      line-height: 1.7;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
      border-left: 4px solid #ffd700;
      margin-bottom: 1.5rem;
      font-size: 1rem;
    }

    .share-section {
      background: rgba(255, 215, 0, 0.1);
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-radius: 10px;
      padding: 1.5rem;
      margin-top: 2rem;
    }

    .form-control {
      background: rgba(245, 245, 220, 0.9);
      border: 2px solid #8b4513;
      border-radius: 8px;
      color: #2c1810;
      font-weight: bold;
    }

    .form-control:focus {
      background: rgba(255, 255, 255, 0.95);
      border-color: #ffd700;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
    }

    .btn-custom {
      background: linear-gradient(145deg, #8b4513, #a0522d);
      border: 2px solid #ffd700;
      border-radius: 8px;
      color: #ffd700;
      font-weight: bold;
      padding: 0.5rem 1.5rem;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .btn-custom:hover {
      background: linear-gradient(145deg, #a0522d, #cd853f);
      color: #fff;
      box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
      transform: translateY(-2px);
      text-decoration: none;
    }

    .btn-outline-custom {
      background: transparent;
      border: 2px solid #ffd700;
      color: #ffd700;
    }

    .btn-outline-custom:hover {
      background: rgba(255, 215, 0, 0.2);
      color: #ffd700;
    }

    .back-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
      background: rgba(139, 69, 19, 0.9);
      border: 2px solid #ffd700;
      border-radius: 50px;
      padding: 0.5rem 1rem;
      color: #ffd700;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
    }

    .back-btn:hover {
      background: rgba(255, 215, 0, 0.2);
      color: #ffd700;
      text-decoration: none;
      transform: scale(1.05);
    }

    .character-indicator {
      display: inline-block;
      background: linear-gradient(45deg, #ffd700, #ffed4e);
      color: #2c1810;
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-weight: bold;
      font-size: 0.9rem;
      margin-left: 0.5rem;
    }
  </style>
</head>
<body>
<a href="/" class="back-btn">
  ← 돌아가기
</a>

<div class="container py-5 mt-4">
  <h1 class="main-title">⚔️ 사고 변환 결과 ⚔️</h1>

  <div th:if="${promptData}" class="result-card">
    <div class="id-badge">
      🆔 변환 ID: <span th:text="${promptData.id}">1</span>
    </div>

    <div class="mb-4">
      <div class="section-title">
        💭 원본 고민
        <span class="character-indicator" th:text="${promptData.characterNames}">캐릭터</span>
      </div>
      <div class="content-text" th:text="${promptData.question}">
        원본 질문이 여기에 표시됩니다.
      </div>
    </div>

    <div class="mb-4">
      <div class="section-title">
        ✨ 변환된 사고방식
      </div>
      <div class="content-text" th:text="${promptData.answer}">
        변환된 답변이 여기에 표시됩니다.
      </div>
    </div>

    <div class="share-section">
      <label for="shareLink" class="form-label section-title">
        🔗 이 결과 공유하기
      </label>
      <div class="input-group mb-3">
        <input type="text"
               id="shareLink"
               class="form-control"
               readonly
               th:value="|${baseUrl}/history/${promptData.id}|"/>
        <button type="button"
                class="btn btn-outline-warning"
                id="copyBtn">📋 복사</button>
      </div>

      <div class="d-flex gap-2 flex-wrap">
        <a th:href="@{/history/{id}(id=${promptData.id})}"
           target="_blank"
           class="btn-custom">
          🔍 새 창에서 열기
        </a>
        <a href="/"
           class="btn-custom btn-outline-custom">
          🔄 다시 변환하기
        </a>
      </div>
    </div>
  </div>

  <div th:unless="${promptData}" class="result-card text-center">
    <h3 style="color: #ffd700; margin-bottom: 1rem;">😅 결과를 찾을 수 없습니다</h3>
    <p style="color: #f5f5dc; margin-bottom: 2rem;">
      요청하신 변환 결과가 존재하지 않거나 삭제되었을 수 있습니다.
    </p>
    <a href="/" class="btn-custom">
      🏠 홈으로 돌아가기
    </a>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
<script>
  // 복사 기능
  if (document.getElementById('copyBtn')) {
    document.getElementById('copyBtn').addEventListener('click', () => {
      const input = document.getElementById('shareLink');
      input.select();
      document.execCommand('copy');
      document.getSelection().removeAllRanges();

      const btn = document.getElementById('copyBtn');
      const originalText = btn.textContent;
      btn.textContent = '✅ 복사됨!';
      btn.style.background = 'rgba(34, 197, 94, 0.8)';

      setTimeout(() => {
        btn.textContent = originalText;
        btn.style.background = '';
      }, 2000);
    });
  }

  // 페이지 로드 애니메이션
  window.addEventListener('load', () => {
    const card = document.querySelector('.result-card');
    if (card) {
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';

      setTimeout(() => {
        card.style.transition = 'all 0.6s ease';
        card.style.opacity = '1';
        card.style.transform = 'translateY(0)';
      }, 100);
    }
  });
</script>
</body>
</html>